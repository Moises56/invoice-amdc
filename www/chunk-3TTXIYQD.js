import{a as z,b as D,c as $,h as j,i as H,j as N,k as A,m as U,n as F,p as L,v as B}from"./chunk-EDQZMFWJ.js";import{a as k}from"./chunk-AL5IVEPX.js";import{A as P,B as y,F as _,I as m,J as s,Ka as S,M as I,Q as u,Sa as E,T as c,Ua as V,V as M,Va as p,Wa as w,Y as a,Z as o,Zb as T,_ as h,ca as x,da as C,ea as b,ma as l,na as O,u as d,w as g}from"./chunk-WYTV4Y2I.js";var R=(()=>{let n=class n{constructor(e){this.http=e,this.apiUrlE=k.apiUrlE}get(e,t=new p){return this.http.get(`${this.apiUrlE}${e}`,{params:t,withCredentials:!0})}post(e,t={}){return this.http.post(`${this.apiUrlE}${e}`,JSON.stringify(t),{headers:this.getHeaders(),withCredentials:!0})}put(e,t={}){return this.http.put(`${this.apiUrlE}${e}`,JSON.stringify(t),{headers:this.getHeaders(),withCredentials:!0})}delete(e){return this.http.delete(`${this.apiUrlE}${e}`,{headers:this.getHeaders(),withCredentials:!0})}getHeaders(){return new V({"Content-Type":"application/json"})}};n.\u0275fac=function(t){return new(t||n)(g(w))},n.\u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();var ne=(()=>{let n=class n{constructor(e){this.apiClient=e}getEstadoDeCuenta(e){let t=new p().set("claveCatastral",e);return this.apiClient.get("/estado-cuenta",t)}getEstadoDeCuentaConAmnistia(e){let t=new p().set("claveCatastral",e);return this.apiClient.get("/estado-cuenta/con-amnistia",t)}getEstadoDeCuentaBySearch(e){let t=new p;return e.claveCatastral&&(t=t.set("claveCatastral",e.claveCatastral)),e.dni&&(t=t.set("dni",e.dni)),this.apiClient.get("/RecEC",t)}getEstadoDeCuentaConAmnistiaBySearch(e){let t=new p;return e.claveCatastral&&(t=t.set("claveCatastral",e.claveCatastral)),e.dni&&(t=t.set("dni",e.dni)),this.apiClient.get("/RecECA",t)}};n.\u0275fac=function(t){return new(t||n)(g(R))},n.\u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();function K(r,n){if(r&1){let f=x();a(0,"ion-button",16),C("click",function(){P(f);let t=b();return y(t.clearSearch())}),h(1,"ion-icon",17),o()}}function Q(r,n){if(r&1&&(a(0,"div",18),h(1,"ion-icon",19),a(2,"span"),l(3),o()()),r&2){let f=b();s(3),O(f.errorMessage())}}function W(r,n){r&1&&(a(0,"span"),l(1," Ingrese la clave catastral (n\xFAmeros y guiones) "),o())}function X(r,n){r&1&&(a(0,"span"),l(1," Ingrese el DNI (13 d\xEDgitos sin espacios) "),o())}var de=(()=>{let n=class n{constructor(){this.placeholder="Ingrese el valor...",this.disabled=!1,this.clearOnSearch=!1,this.search=new _,this.clear=new _,this.searchType=m("claveCatastral"),this.searchValue=m(""),this.isValid=m(!0),this.errorMessage=m("")}onSearchTypeChange(e){let t=e;this.searchType.set(t),this.searchValue.set(""),this.isValid.set(!0),this.errorMessage.set(""),this.clear.emit()}onInputChange(e){this.searchValue.set(e),this.validateInput(e),e.trim()&&this.isValid()?this.performSearch():e.trim()||this.clear.emit()}validateInput(e){let t=e.trim();if(!t){this.isValid.set(!0),this.errorMessage.set("");return}if(this.searchType()==="claveCatastral"){if(!/^[0-9-]+$/.test(t)){this.isValid.set(!1),this.errorMessage.set("La clave catastral solo debe contener n\xFAmeros y guiones");return}if(t.length<5){this.isValid.set(!1),this.errorMessage.set("La clave catastral debe tener al menos 5 caracteres");return}}else if(this.searchType()==="dni"&&!/^[0-9]{13}$/.test(t)){this.isValid.set(!1),this.errorMessage.set("El DNI debe contener exactamente 13 d\xEDgitos");return}this.isValid.set(!0),this.errorMessage.set("")}performSearch(){let e=this.searchValue().trim();if(!e||!this.isValid())return;let t={};this.searchType()==="claveCatastral"?t.claveCatastral=e:t.dni=e,this.search.emit(t),this.clearOnSearch&&this.searchValue.set("")}clearSearch(){this.searchValue.set(""),this.isValid.set(!0),this.errorMessage.set(""),this.clear.emit()}getPlaceholder(){return this.searchType()==="claveCatastral"?"Ej: 12345-67890":"Ej: 1234567890123"}getSearchTypeLabel(){return this.searchType()==="claveCatastral"?"Clave Catastral":"DNI"}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I({type:n,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",disabled:"disabled",clearOnSearch:"clearOnSearch"},outputs:{search:"search",clear:"clear"},decls:23,vars:13,consts:[[1,"search-container"],[1,"search-type-selector",3,"ionChange","value"],["value","claveCatastral"],["name","home-outline"],["value","dni"],["name","card-outline"],[1,"search-input-container"],["lines","none",1,"search-item"],["position","stacked"],["type","text","autocomplete","off","spellcheck","false",3,"ionInput","value","placeholder","disabled"],["fill","clear","slot","end","size","small",3,"click",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"help-info"],["color","medium"],["name","information-circle-outline"],[4,"ngIf"],["fill","clear","slot","end","size","small",3,"click"],["name","close-circle","slot","icon-only"],[1,"error-message"],["name","alert-circle","color","danger"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"ion-segment",1),C("ionChange",function(v){return i.onSearchTypeChange(v.detail.value)}),a(2,"ion-segment-button",2)(3,"ion-label"),l(4,"Clave Catastral"),o(),h(5,"ion-icon",3),o(),a(6,"ion-segment-button",4)(7,"ion-label"),l(8,"DNI"),o(),h(9,"ion-icon",5),o()(),a(10,"div",6)(11,"ion-item",7)(12,"ion-label",8),l(13),o(),a(14,"ion-input",9),C("ionInput",function(v){return i.onInputChange(v.detail.value)}),o(),u(15,K,2,0,"ion-button",10),o(),u(16,Q,4,1,"div",11),o(),a(17,"div",12)(18,"ion-text",13)(19,"small"),h(20,"ion-icon",14),u(21,W,2,0,"span",15)(22,X,2,0,"span",15),o()()()()),t&2&&(s(),c("value",i.searchType()),s(10),M("error",!i.isValid()),s(2),O(i.getSearchTypeLabel()),s(),M("error-input",!i.isValid()),c("value",i.searchValue())("placeholder",i.getPlaceholder())("disabled",i.disabled),s(),c("ngIf",i.searchValue()),s(),c("ngIf",!i.isValid()&&i.errorMessage()),s(5),c("ngIf",i.searchType()==="claveCatastral"),s(),c("ngIf",i.searchType()==="dni"))},dependencies:[B,$,j,H,N,A,U,F,L,z,D,E,S,T],styles:[".search-container[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.search-type-selector[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.search-type-selector[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: var(--ion-color-medium);--color-checked: var(--ion-color-primary);--background-checked: var(--ion-color-primary-tint);--border-radius: 0}.search-type-selector[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.search-type-selector[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:4px;font-size:1.1rem}.search-input-container[_ngcontent-%COMP%]{position:relative}.search-item[_ngcontent-%COMP%]{--background: var(--ion-color-light);--border-radius: 12px;--padding-start: 16px;--padding-end: 16px;--min-height: 60px;border:2px solid transparent;margin-bottom:8px;transition:all .3s ease}.search-item[_ngcontent-%COMP%]:not(.error):hover{--background: var(--ion-color-light-shade);border-color:var(--ion-color-primary-tint)}.search-item[_ngcontent-%COMP%]:not(.error).item-has-focus{border-color:var(--ion-color-primary);box-shadow:0 0 0 3px rgba(var(--ion-color-primary-rgb),.1)}.search-item.error[_ngcontent-%COMP%]{border-color:var(--ion-color-danger);--background: rgba(var(--ion-color-danger-rgb), .05)}.search-item.error[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-danger)}.search-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:600;font-size:.85rem;margin-bottom:4px;color:var(--ion-color-dark)}.search-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--ion-color-dark);font-size:1rem}.search-item[_ngcontent-%COMP%]   ion-input.error-input[_ngcontent-%COMP%]{--color: var(--ion-color-danger)}.search-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--ion-color-medium)}.search-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--color: var(--ion-color-danger)}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(var(--ion-color-danger-rgb),.1);border-radius:8px;margin-bottom:12px}.error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:1.1rem;flex-shrink:0}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:.85rem;font-weight:500}.help-info[_ngcontent-%COMP%]{padding:8px 16px}.help-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.help-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.help-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;line-height:1.3}@media (max-width: 768px){.search-type-selector[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8rem}.search-type-selector[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.search-item[_ngcontent-%COMP%]{--min-height: 55px;--padding-start: 12px;--padding-end: 12px}}@media (prefers-color-scheme: dark){.search-item[_ngcontent-%COMP%]{--background: var(--ion-color-dark-tint)}.search-item[_ngcontent-%COMP%]:not(.error):hover{--background: var(--ion-color-dark-shade)}.search-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-light)}.search-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--ion-color-light)}.error-message[_ngcontent-%COMP%]{background:rgba(var(--ion-color-danger-rgb),.2)}}"]});let r=n;return r})();export{ne as a,de as b};
