import{a as he}from"./chunk-E5CGDO2G.js";import{$ as De,F as Oe,H as Ee,Ha as Ne,Ja as Ve,L as Se,N as we,Ua as ze,a as ve,aa as Ie,bb as $e,db as Fe,f as Ce,fa as ke,h as Pe,hb as Ge,ja as Me,ka as Te,la as Ae,nb as je,ra as Le,rb as We,wa as Re,y as ye,za as Ue}from"./chunk-PIGH2764.js";import{a as _e}from"./chunk-HENECHRK.js";import{$ as v,Ac as xe,Db as ee,Ea as q,Fa as K,G as O,H as l,I as V,Jb as te,K as J,Kb as ne,Lb as ie,Mb as oe,N as E,Na as Q,Nb as re,Ob as ae,P as _,Pb as le,Qa as X,Qb as se,S as H,Sb as ce,T as B,U as n,V as i,Va as Z,W as m,Wb as de,_ as U,aa as b,bc as ge,fc as ue,g as k,gc as me,ia as o,j as M,ja as p,ka as C,la as z,mc as pe,n as T,oc as fe,qc as be,ra as Y,u as j,v as W,y as P,z as y}from"./chunk-5JVX3F6S.js";import"./chunk-3BKI4OCD.js";import"./chunk-QUJFQN2Y.js";import"./chunk-Q54UXUQI.js";import"./chunk-3X2ZBCS4.js";import"./chunk-MIXIO5PR.js";import"./chunk-XQESWZ4T.js";import"./chunk-7KGURMOZ.js";import"./chunk-TLFJBS62.js";import"./chunk-X2MTSPWE.js";import"./chunk-ZXCKTIDB.js";import"./chunk-M66VC23L.js";import"./chunk-L2DIMNML.js";import"./chunk-JEDV2W6G.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-6OKYY42W.js";import"./chunk-CKP3SGE2.js";import"./chunk-Z7MVEU4J.js";import"./chunk-PJL56ILQ.js";import"./chunk-NVWEJ7GR.js";import"./chunk-UVAVEIEI.js";import"./chunk-E6CW6KXY.js";import"./chunk-Z3EESIK6.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-6WKZVARI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as A,b as L,h as R}from"./chunk-LNJ3S2LQ.js";var Je=(()=>{let u=class u{constructor(e){this.http=e,this.baseUrl=`${_e.apiUrl}/audit`,this.httpOptions={withCredentials:!0,headers:{"Content-Type":"application/json"}}}getStats(){return this.http.get(`${this.baseUrl}/stats`,this.httpOptions).pipe(M(e=>{var c;console.log("\u{1F4CA} Response from /stats:",e);let t=((c=e.most_active_users)==null?void 0:c.map(g=>{var d,x,h;return{userId:g.userId,userName:((d=g.user)==null?void 0:d.nombre)||"Usuario",userEmail:((x=g.user)==null?void 0:x.correo)||"",actions:((h=g._count)==null?void 0:h.id)||0,lastActivity:new Date().toISOString()}}))||[],r={total_logs:e.total_logs||0,logs_today:e.logs_today||0,logs_this_week:e.logs_this_week||e.total_logs,logs_this_month:e.logs_this_month||e.total_logs,logs_by_action:e.logs_by_action||{},logs_by_table:e.logs_by_table||{},most_active_users:t,totalLogs:e.total_logs||0,todayLogs:e.logs_today||0,thisWeekLogs:e.logs_this_week||e.total_logs,thisMonthLogs:e.logs_this_month||e.total_logs,operationCounts:e.logs_by_action||{},userActivity:t};return console.log("\u{1F4CA} Mapped stats:",r),r}),T(e=>(console.error("\u274C Error getting stats:",e),k(this.getMockStats()))))}getLogs(e=50,t=0){return this.http.get(`${this.baseUrl}/logs?limit=${e}&offset=${t}`,this.httpOptions).pipe(M(r=>{var g,d;console.log("\u{1F4CB} Response from /logs:",r);let c={logs:r.data||r.logs||[],total:((g=r.pagination)==null?void 0:g.total)||r.total||((d=r.data)==null?void 0:d.length)||0};return console.log("\u{1F4CB} Mapped logs:",c),c}),T(r=>(console.error("\u274C Error getting logs:",r),k(this.getMockRecentActivity()))))}getRecentActivity(e=10){return this.http.get(`${this.baseUrl}/logs?limit=${e}`,this.httpOptions).pipe(M(t=>{var c,g;console.log("\u{1F552} Response from /logs (recent):",t);let r={logs:t.data||t.logs||[],total:((c=t.pagination)==null?void 0:c.total)||t.total||((g=t.data)==null?void 0:g.length)||0};return console.log("\u{1F552} Mapped recent activity:",r),r}),T(t=>(console.error("\u274C Error getting recent activity:",t),k(this.getMockRecentActivity()))))}getUserLogs(e,t=50){return this.http.get(`${this.baseUrl}/users/${e}?limit=${t}`,this.httpOptions).pipe(M(r=>{var g,d;console.log("\u{1F464} Response from /users logs:",r);let c={logs:r.data||r.logs||[],total:((g=r.pagination)==null?void 0:g.total)||r.total||((d=r.data)==null?void 0:d.length)||0};return console.log("\u{1F464} Mapped user logs:",c),c}),T(r=>(console.error("\u274C Error getting user logs:",r),k(this.getMockRecentActivity()))))}getLogDetails(e){return this.http.get(`${this.baseUrl}/logs/${e}`,this.httpOptions).pipe(M(t=>(console.log("\u{1F50D} Response from /log details:",t),t)),T(t=>(console.error("\u274C Error getting log details:",t),k(null))))}getOperationStats(){return this.getStats().pipe(M(e=>(console.log("\u{1F4C8} Getting operation stats from stats:",e.logs_by_action),e.logs_by_action||{})),T(e=>(console.error("\u274C Error getting operation stats:",e),k({}))))}getMockStats(){return{total_logs:1250,logs_today:45,logs_this_week:156,logs_this_month:432,logs_by_action:{LOGIN:324,LOGOUT:298,CREATE_INVOICE:89,UPDATE_INVOICE:67,DELETE_INVOICE:12,VIEW_REPORT:156},most_active_users:[{userId:"user_1",userName:"Juan P\xE9rez",actions:89,lastActivity:new Date().toISOString()},{userId:"user_2",userName:"Mar\xEDa Garc\xEDa",actions:76,lastActivity:new Date(Date.now()-36e5).toISOString()}],totalLogs:1250,todayLogs:45,thisWeekLogs:156,thisMonthLogs:432,operationCounts:{LOGIN:324,LOGOUT:298,CREATE_INVOICE:89,UPDATE_INVOICE:67,DELETE_INVOICE:12,VIEW_REPORT:156},userActivity:[{userId:"user_1",userName:"Juan P\xE9rez",actions:89,lastActivity:new Date().toISOString()},{userId:"user_2",userName:"Mar\xEDa Garc\xEDa",actions:76,lastActivity:new Date(Date.now()-36e5).toISOString()}]}}getMockRecentActivity(){return{logs:[{id:"1",action:"LOGIN",user_id:"user_1",user_name:"Juan P\xE9rez",timestamp:new Date().toISOString(),ip_address:"192.168.1.100"},{id:"2",action:"CREATE_INVOICE",user_id:"user_2",user_name:"Mar\xEDa Garc\xEDa",timestamp:new Date(Date.now()-3e5).toISOString(),ip_address:"192.168.1.101"}],total:2}}};u.\u0275fac=function(t){return new(t||u)(W(X))},u.\u0275prov=j({token:u,factory:u.\u0275fac,providedIn:"root"});let s=u;return s})();var Ye=()=>[1,2,3,4];function qe(s,u){s&1&&(n(0,"ion-card",13)(1,"ion-card-content",14)(2,"div",15),m(3,"div",16)(4,"div",17)(5,"div",18),i()()())}function Ke(s,u){s&1&&(n(0,"div",10)(1,"div",11),E(2,qe,6,0,"ion-card",12),i()()),s&2&&(l(2),_("ngForOf",Y(1,Ye)))}function Qe(s,u){if(s&1){let a=U();n(0,"div",19)(1,"div",20),m(2,"ion-icon",21),n(3,"h2",22),o(4,"Error al cargar datos"),i(),n(5,"p",23),o(6),i(),n(7,"ion-button",24),v("click",function(){P(a);let t=b();return y(t.loadDashboardData())}),m(8,"ion-icon",25),o(9," Reintentar "),i()()()}if(s&2){let a=b();l(6),p(a.error())}}function Xe(s,u){if(s&1&&(n(0,"option",99),o(1),i()),s&2){let a=u.$implicit;_("value",a),l(),p(a)}}function Ze(s,u){if(s&1){let a=U();n(0,"tr",100),v("click",function(){let t=P(a).$implicit,r=b(2);return y(r.navigateToLogDetail(t.id))}),n(1,"td",101),o(2),i(),n(3,"td",102)(4,"div",103)(5,"div",104),o(6),i(),n(7,"div")(8,"div",105),o(9),i(),n(10,"div",85),o(11),i()()()(),n(12,"td",102)(13,"span",106),o(14),i()(),n(15,"td",102)(16,"div",107),o(17),i(),n(18,"div",85),o(19),i()(),n(20,"td",108),o(21),i()()}if(s&2){let a=u.$implicit,e=b(2);l(2),C(" ",e.formatDateTime(a.createdAt)," "),l(4),C(" ",e.getUserInitials((a.user==null?null:a.user.nombre)||"Usuario")," "),l(3),p((a.user==null?null:a.user.nombre)||"mougrind"),l(2),p((a.user==null?null:a.user.correo)||"mougrind@amdc.hn"),l(3),C(" ",a.accion," "),l(3),C(" ",e.getActionDescription(a.accion,a.tabla)," "),l(2),z(" ",a.tabla," \u2022 ",a.registroId?"ID: "+a.registroId:"Sistema"," "),l(2),C(" ",a.ip||"-"," ")}}function et(s,u){s&1&&(n(0,"tr")(1,"td",109),m(2,"ion-icon",110),n(3,"p"),o(4,"No hay registros que coincidan con los filtros"),i()()())}function tt(s,u){if(s&1){let a=U();n(0,"button",111),v("click",function(){let t=P(a).$implicit,r=b(2);return y(r.goToPage(t))}),o(1),i()}if(s&2){let a=u.$implicit,e=b(2);H(a===e.pagination().currentPage?"background: linear-gradient(135deg, #5ccedf, #4db8cc); box-shadow: 0 4px 6px -1px rgba(92, 206, 223, 0.3); border-radius: 2rem;":"border-radius: 2rem;"),B(a===e.pagination().currentPage?"text-white border-transparent shadow-md transform scale-105":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50 hover:border-gray-400"),l(),C(" ",a," ")}}function nt(s,u){if(s&1){let a=U();n(0,"div",10)(1,"div",26)(2,"ion-card",27),v("click",function(){P(a);let t=b();return y(t.navigateToLogs())}),n(3,"ion-card-content",28)(4,"div"),m(5,"ion-icon",29),n(6,"p",30),o(7,"Logs"),i(),n(8,"p",31),o(9),i()()()(),n(10,"ion-card",32)(11,"ion-card-content",28)(12,"div"),m(13,"ion-icon",33),n(14,"p",30),o(15,"Hoy"),i(),n(16,"p",31),o(17),i()()()(),n(18,"ion-card",32)(19,"ion-card-content",28)(20,"div"),m(21,"ion-icon",34),n(22,"p",30),o(23,"Auth"),i(),n(24,"p",31),o(25),i()()()(),n(26,"ion-card",32)(27,"ion-card-content",28)(28,"div"),m(29,"ion-icon",35),n(30,"p",30),o(31,"Dash"),i(),n(32,"p",31),o(33),i()()()()(),n(34,"ion-card",36)(35,"div",37)(36,"h2"),m(37,"ion-icon",38),o(38," Operaciones por Tipo "),i()(),n(39,"div",39)(40,"div",40)(41,"div",41),m(42,"ion-icon",42),i(),n(43,"div",43),o(44),i(),n(45,"div",44),o(46,"LOGIN"),i(),n(47,"ion-chip"),o(48),i()(),n(49,"div",40)(50,"div",45),m(51,"ion-icon",46),i(),n(52,"div",43),o(53),i(),n(54,"div",44),o(55,"VIEW STATS"),i(),n(56,"ion-chip"),o(57),i()(),n(58,"div",40)(59,"div",47),m(60,"ion-icon",48),i(),n(61,"div",43),o(62),i(),n(63,"div",44),o(64,"RESET PWD"),i(),n(65,"ion-chip"),o(66),i()(),n(67,"div",40)(68,"div",49),m(69,"ion-icon",50),i(),n(70,"div",43),o(71),i(),n(72,"div",44),o(73,"TEST API"),i(),n(74,"ion-chip"),o(75),i()()()(),n(76,"ion-card",51)(77,"div",37)(78,"h2"),m(79,"ion-icon",52),o(80," Registro de Actividades del Sistema "),n(81,"ion-button",53),v("click",function(){P(a);let t=b();return y(t.showAllLogsModal())}),o(82),i()()(),n(83,"ion-card-content",54)(84,"div",55)(85,"div",56)(86,"div")(87,"label",57),o(88,"ID de Usuario"),i(),n(89,"input",58),v("input",function(t){P(a);let r=b();return y(r.onFilterChange("userId",t.target.value))}),i()(),n(90,"div")(91,"label",57),o(92,"Tipo de Acci\xF3n"),i(),n(93,"select",59),v("change",function(t){P(a);let r=b();return y(r.onFilterChange("action",t.target.value))}),n(94,"option",60),o(95,"Todas las acciones"),i(),E(96,Xe,2,2,"option",61),i()(),n(97,"div",62)(98,"button",63),v("click",function(){P(a);let t=b();return y(t.resetFilters())}),o(99," Limpiar "),i()()()(),n(100,"div",64)(101,"table",65)(102,"thead",66)(103,"tr",67)(104,"th",68),o(105,"FECHA Y HORA"),i(),n(106,"th",68),o(107,"USUARIO"),i(),n(108,"th",68),o(109,"ACCI\xD3N"),i(),n(110,"th",68),o(111,"DETALLES"),i(),n(112,"th",68),o(113,"DIRECCI\xD3N IP"),i()()(),n(114,"tbody",69),E(115,Ze,22,9,"tr",70)(116,et,5,0,"tr",71),i()()(),n(117,"div",72)(118,"div",73)(119,"div",74),m(120,"ion-icon",75),n(121,"span",76),o(122," Mostrando "),n(123,"span",77),o(124),i(),o(125," a "),n(126,"span",77),o(127),i(),o(128," de "),n(129,"span",77),o(130),i(),o(131," resultados "),i()(),n(132,"div",78)(133,"button",79),v("click",function(){P(a);let t=b();return y(t.goToPage(t.pagination().currentPage-1))}),m(134,"ion-icon",80),i(),n(135,"div",81),E(136,tt,2,5,"button",82),i(),n(137,"button",79),v("click",function(){P(a);let t=b();return y(t.goToPage(t.pagination().currentPage+1))}),m(138,"ion-icon",83),i()()(),n(139,"div",84)(140,"span",85),o(141),n(142,"span",86),o(143,"\u2022"),i(),o(144),i()()()()(),n(145,"ion-card",87)(146,"div",37)(147,"h2"),m(148,"ion-icon",88),o(149," Operaciones R\xE1pidas "),i()(),n(150,"ion-card-content",89)(151,"div",90)(152,"button",91),v("click",function(){P(a);let t=b();return y(t.showAllLogsModal())}),m(153,"ion-icon",92),n(154,"span",93),o(155,"Ver Todos los Logs"),i(),n(156,"span",94),o(157),i()(),n(158,"button",95),v("click",function(){P(a);let t=b();return y(t.showStatsModal())}),m(159,"ion-icon",96),n(160,"span",93),o(161,"Estad\xEDsticas Detalladas"),i(),n(162,"span",94),o(163,"Ver m\xE9tricas completas"),i()(),n(164,"button",97),v("click",function(){P(a);let t=b();return y(t.showActiveUsersModal())}),m(165,"ion-icon",98),n(166,"span",93),o(167,"Usuarios Activos"),i(),n(168,"span",94),o(169,"Ver actividad de usuarios"),i()()()()()()}if(s&2){let a,e,t=b();l(9),p(((a=t.stats())==null?null:a.total_logs)||t.recentActivity().length||0),l(8),p(((e=t.stats())==null?null:e.logs_today)||t.getTodayLogsCount()||0),l(8),p(t.getTableCount("auth")),l(8),p(t.getTableCount("dashboard")),l(11),p(t.getOperationCount("LOGIN")),l(4),C("",t.getOperationPercentage("LOGIN"),"%"),l(5),p(t.getOperationCount("VIEW_STATISTICS")),l(4),C("",t.getOperationPercentage("VIEW_STATISTICS"),"%"),l(5),p(t.getOperationCount("RESET_PASSWORD")),l(4),C("",t.getOperationPercentage("RESET_PASSWORD"),"%"),l(5),p(t.getOperationCount("TEST_POSTMAN")),l(4),C("",t.getOperationPercentage("TEST_POSTMAN"),"%"),l(7),C(" Ver Todos (",t.recentActivity().length,") "),l(7),_("value",t.filters().userId),l(4),_("value",t.filters().action),l(3),_("ngForOf",t.getUniqueActions()),l(19),_("ngForOf",t.getPaginatedLogs())("ngForTrackBy",t.trackByLogId),l(),_("ngIf",t.getPaginatedLogs().length===0),l(8),p(t.pagination().startIndex+1),l(3),p(t.pagination().endIndex),l(3),p(t.pagination().totalItems),l(3),_("disabled",t.pagination().currentPage<=1),l(3),_("ngForOf",t.getPageNumbers()),l(),_("disabled",t.pagination().currentPage>=t.pagination().totalPages),l(4),z(" P\xE1gina ",t.pagination().currentPage," de ",t.pagination().totalPages," "),l(3),C(" ",t.pagination().itemsPerPage," elementos por p\xE1gina "),l(13),C("",t.recentActivity().length," registros")}}function it(s,u){s&1&&(n(0,"div",121),m(1,"ion-spinner"),n(2,"p",122),o(3,"Cargando detalles..."),i()())}function ot(s,u){if(s&1&&(n(0,"div",132)(1,"label",133),o(2,"\u{1F522} ID del Registro"),i(),n(3,"p",143),o(4),i()()),s&2){let a,e=b(3);l(4),p(((a=e.selectedLog())==null?null:a.registroId)||((a=e.selectedLog())==null?null:a.registro_id))}}function rt(s,u){if(s&1&&(n(0,"div",154)(1,"label",155),o(2,"\u{1F4DD} Datos Anteriores"),i(),n(3,"pre",156),o(4),i()()),s&2){let a,e=b(3);l(4),p(e.formatJsonData(((a=e.selectedLog())==null?null:a.datosAntes)||((a=e.selectedLog())==null?null:a.datos_anteriores)))}}function at(s,u){if(s&1&&(n(0,"div",157)(1,"label",158),o(2,"\u2728 Datos Nuevos"),i(),n(3,"pre",156),o(4),i()()),s&2){let a,e=b(3);l(4),p(e.formatJsonData(((a=e.selectedLog())==null?null:a.datosDespues)||((a=e.selectedLog())==null?null:a.datos_nuevos)))}}function lt(s,u){if(s&1&&(n(0,"div",159)(1,"label",160),o(2,"\u{1F4CB} Detalles Adicionales"),i(),n(3,"pre",156),o(4),i()()),s&2){let a,e=b(3);l(4),p(e.formatJsonData((a=e.selectedLog())==null?null:a.detalles))}}function st(s,u){if(s&1&&(n(0,"div",123)(1,"ion-card",124)(2,"ion-card-header",125)(3,"ion-card-title",126),m(4,"ion-icon",127),n(5,"span",128),o(6),i()(),n(7,"ion-card-subtitle",129),o(8),i()(),n(9,"ion-card-content",130)(10,"div",131)(11,"div",10)(12,"div",132)(13,"label",133),o(14,"\u{1F194} ID del Log"),i(),n(15,"p",134),o(16),i()(),n(17,"div",132)(18,"label",133),o(19,"\u{1F5C2}\uFE0F Tabla"),i(),n(20,"p",135),o(21),i()(),E(22,ot,5,1,"div",136),i(),n(23,"div",10)(24,"div",137)(25,"label",138),o(26,"\u{1F464} Usuario"),i(),n(27,"div",103)(28,"div",139),o(29),i(),n(30,"div",140)(31,"p",141),o(32),i(),n(33,"p",142),o(34),i()()()(),n(35,"div",132)(36,"label",133),o(37,"\u{1F310} Direcci\xF3n IP"),i(),n(38,"p",143),o(39),i()(),n(40,"div",132)(41,"label",133),o(42,"\u{1F511} ID de Usuario"),i(),n(43,"p",143),o(44),i()()()(),n(45,"div",144)(46,"label",145),o(47,"\u{1F50D} User Agent"),i(),n(48,"p",146),o(49),i()(),E(50,rt,5,1,"div",147)(51,at,5,1,"div",148)(52,lt,5,1,"div",149),n(53,"div",137)(54,"label",138),o(55,"\u23F0 Informaci\xF3n de Tiempo"),i(),n(56,"div",150)(57,"div",151)(58,"span",152),o(59,"\u{1F550} Creado:"),i(),m(60,"br"),n(61,"span",153),o(62),i()(),n(63,"div",151)(64,"span",152),o(65,"\u26A1 Timestamp:"),i(),m(66,"br"),n(67,"span",153),o(68),i()()()()()()()),s&2){let a,e,t,r,c,g,d,x,h,S,D,w,I,N,$,F,G,f=b(2);l(4),_("name",f.getActionIcon((a=f.selectedLog())==null?null:a.accion)),l(2),p((e=f.selectedLog())==null?null:e.accion),l(2),C(" \u{1F4C5} ",f.formatDateTime((t=f.selectedLog())==null?null:t.createdAt)," "),l(8),p((r=f.selectedLog())==null?null:r.id),l(5),p((c=f.selectedLog())==null?null:c.tabla),l(),_("ngIf",((g=f.selectedLog())==null?null:g.registroId)||((g=f.selectedLog())==null?null:g.registro_id)),l(7),C(" ",f.getUserInitials(((d=f.selectedLog())==null||d.user==null?null:d.user.nombre)||"Usuario")," "),l(3),z("",(x=f.selectedLog())==null||x.user==null?null:x.user.nombre," ",(x=f.selectedLog())==null||x.user==null?null:x.user.apellido,""),l(2),p((h=f.selectedLog())==null||h.user==null?null:h.user.correo),l(5),p(((S=f.selectedLog())==null?null:S.ip)||((S=f.selectedLog())==null?null:S.ip_address)||"No disponible"),l(5),p((D=f.selectedLog())==null?null:D.userId),l(5),p(((w=f.selectedLog())==null?null:w.userAgent)||((w=f.selectedLog())==null?null:w.user_agent)||"No disponible"),l(),_("ngIf",((I=f.selectedLog())==null?null:I.datosAntes)||((I=f.selectedLog())==null?null:I.datos_anteriores)),l(),_("ngIf",((N=f.selectedLog())==null?null:N.datosDespues)||((N=f.selectedLog())==null?null:N.datos_nuevos)),l(),_("ngIf",($=f.selectedLog())==null?null:$.detalles),l(10),p(f.formatDetailedDateTime((F=f.selectedLog())==null?null:F.createdAt)),l(6),p(f.getTimestamp((G=f.selectedLog())==null?null:G.createdAt))}}function ct(s,u){if(s&1){let a=U();n(0,"ion-header")(1,"ion-toolbar",112)(2,"ion-title",113),m(3,"ion-icon",114),o(4," Detalles del Log "),i(),n(5,"ion-buttons",115)(6,"ion-button",116),v("click",function(){P(a);let t=b();return y(t.closeModal())}),m(7,"ion-icon",117),i()()()(),n(8,"ion-content",118),E(9,it,4,0,"div",119)(10,st,69,18,"div",120),i()}if(s&2){let a=b();l(9),_("ngIf",a.isLoadingLogDetail()),l(),_("ngIf",!a.isLoadingLogDetail()&&a.selectedLog())}}var yt=(()=>{let u=class u{constructor(e,t,r){this.auditoriaService=e,this.router=t,this.alertController=r,this.stats=O(null),this.recentActivity=O([]),this.filteredLogs=O([]),this.isLoading=O(!0),this.error=O(null),this.isModalOpen=O(!1),this.selectedLog=O(null),this.isLoadingLogDetail=O(!1),this.filters=O({userId:"",action:"",startDate:"",endDate:""}),this.pagination=O({currentPage:1,itemsPerPage:15,totalItems:0,totalPages:0,startIndex:0,endIndex:0}),this.Math=Math,ve({alertCircleOutline:Ce,refreshOutline:ze,statsChartOutline:Fe,logInOutline:Ue,eyeOutline:ke,keyOutline:Le,flaskOutline:Te,peopleOutline:Ne,timeOutline:Ge,documentTextOutline:De,chevronBackOutline:Ee,chevronForwardOutline:Se,flashOutline:Me,listOutline:Re,analyticsOutline:Pe,downloadOutline:Ie,close:we,calendarOutline:ye,shieldCheckmarkOutline:$e,gridOutline:Ae,trendingUpOutline:je,personCircleOutline:Ve,warningOutline:We,checkmarkCircleOutline:Oe})}ngOnInit(){console.log("\u{1F680} AuditoriaDashboardPage ngOnInit iniciado"),this.loadDashboardData()}loadDashboardData(){return R(this,null,function*(){console.log("\u{1F504} loadDashboardData iniciado"),this.isLoading.set(!0),this.error.set(null);try{console.log("\u{1F504} Cargando datos reales del backend..."),this.auditoriaService.getStats().subscribe({next:e=>{console.log("\u2705 Estad\xEDsticas cargadas exitosamente:",e),this.stats.set(e),this.isLoading.set(!1)},error:e=>{console.error("\u274C Error cargando estad\xEDsticas:",e),this.error.set("Error al cargar estad\xEDsticas"),this.isLoading.set(!1)}}),this.auditoriaService.getLogs(50).subscribe({next:e=>{console.log("\u2705 Logs completos cargados:",e),e&&e.logs?(this.recentActivity.set(e.logs),this.filteredLogs.set(e.logs),this.updatePagination(),console.log("\u{1F4CA} Total logs set:",e.logs.length)):e&&e.data?(this.recentActivity.set(e.data),this.filteredLogs.set(e.data),this.updatePagination(),console.log("\u{1F4CA} Total logs set (data):",e.data.length)):(console.log("\u26A0\uFE0F Response formato desconocido:",e),this.recentActivity.set([]),this.filteredLogs.set([]))},error:e=>{console.error("\u274C Error cargando logs:",e),this.recentActivity.set([])}})}catch(e){console.error("\u{1F4A5} Error en loadDashboardData:",e),this.error.set("Error al cargar los datos del dashboard"),this.isLoading.set(!1)}})}testAllEndpoints(){console.log("\u{1F50D} Iniciando prueba de todos los endpoints..."),console.log("\u{1F4CB} Probando GET /api/audit/logs..."),this.auditoriaService.getLogs(5).subscribe({next:e=>console.log("\u2705 Logs:",e),error:e=>console.error("\u274C Error en logs:",e)}),console.log("\u{1F4CA} Probando GET /api/audit/stats..."),this.auditoriaService.getStats().subscribe({next:e=>console.log("\u2705 Stats:",e),error:e=>console.error("\u274C Error en stats:",e)}),console.log("\u{1F552} Probando GET /api/audit/recent..."),this.auditoriaService.getRecentActivity(3).subscribe({next:e=>console.log("\u2705 Recent:",e),error:e=>console.error("\u274C Error en recent:",e)}),console.log("\u{1F464} Probando GET /api/audit/users/:userId..."),this.auditoriaService.getUserLogs("1",3).subscribe({next:e=>console.log("\u2705 User logs:",e),error:e=>console.error("\u274C Error en user logs:",e)}),console.log("\u{1F50D} Probando GET /api/audit/logs/:id..."),this.auditoriaService.getLogDetails("1").subscribe({next:e=>console.log("\u2705 Log detail:",e),error:e=>console.error("\u274C Error en log detail:",e)}),console.log("\u{1F4C8} Probando estad\xEDsticas de operaciones..."),this.auditoriaService.getOperationStats().subscribe({next:e=>console.log("\u2705 Operation stats:",e),error:e=>console.error("\u274C Error en operation stats:",e)}),console.log("\u{1F3C1} Prueba de endpoints completada. Revisa la consola para ver los resultados.")}getMockRecentLogs(){let e=new Date;return[{id:"1",accion:"CREATE",tabla:"facturas",registro_id:"FAC-001",datos_anteriores:void 0,datos_nuevos:{numero_factura:"FAC-001",monto:150},ip_address:"192.168.1.100",user_agent:"Mozilla/5.0...",userId:"1",user:{id:"1",username:"jperez",nombre:"Juan",apellido:"P\xE9rez",correo:"juan@example.com",role:"USER",dni:"12345678",isActive:!0,createdAt:new Date,updatedAt:new Date},createdAt:new Date(e.getTime()-5*6e4)},{id:"2",accion:"UPDATE",tabla:"usuarios",registro_id:"2",datos_anteriores:{isActive:!1},datos_nuevos:{isActive:!0},ip_address:"192.168.1.101",user_agent:"Mozilla/5.0...",userId:"1",user:{id:"1",username:"jperez",nombre:"Juan",apellido:"P\xE9rez",correo:"juan@example.com",role:"ADMIN",dni:"12345678",isActive:!0,createdAt:new Date,updatedAt:new Date},createdAt:new Date(e.getTime()-15*6e4)},{id:"3",accion:"DELETE",tabla:"locales",registro_id:"12",datos_anteriores:{nombre:"Local Cerrado",numero:"12A"},datos_nuevos:void 0,ip_address:"192.168.1.102",user_agent:"Mozilla/5.0...",userId:"2",user:{id:"2",username:"mgarcia",nombre:"Mar\xEDa",apellido:"Garc\xEDa",correo:"maria@example.com",role:"ADMIN",dni:"87654321",isActive:!0,createdAt:new Date,updatedAt:new Date},createdAt:new Date(e.getTime()-30*6e4)}]}doRefresh(e){return R(this,null,function*(){yield this.loadDashboardData(),e.target.complete()})}navigateToLogs(){console.log("\u{1F4C4} Navegando a la p\xE1gina de auditor\xEDa..."),this.router.navigate(["/auditoria"])}navigateToStats(){console.log("\u{1F4CA} Mostrando estad\xEDsticas detalladas..."),this.showStatsModal()}navigateToLogDetail(e){console.log("\u{1F50D} Cargando detalles del log:",e),this.isModalOpen.set(!0),this.loadLogDetails(e)}navigateToUserLogs(e){console.log("\u{1F464} Cargando logs del usuario:",e),this.loadUserLogs(e)}showAllLogsModal(){return R(this,null,function*(){let e=this.recentActivity().length,r=this.recentActivity().slice(0,10).map(g=>{var d;return`\u2022 ${g.accion} por ${((d=g.user)==null?void 0:d.nombre)||"Usuario"} - ${this.formatDateTime(g.createdAt)}`}).join(`
`);yield(yield this.alertController.create({header:"\u{1F4C4} Todos los Logs de Auditor\xEDa",subHeader:`Total: ${e} registros`,message:`\xDAltimos 10 registros:

${r}`,buttons:[{text:"Ver Detalles",handler:()=>{this.navigateToLogs()}},{text:"Cerrar",role:"cancel"}]})).present()})}showStatsModal(){return R(this,null,function*(){var c,g,d,x,h,S,D;let e=this.stats();if(!e){yield(yield this.alertController.create({header:"Error",message:"No hay estad\xEDsticas disponibles",buttons:["OK"]})).present();return}let t=`\u{1F4CB} Total de Logs: ${e.total_logs}
\u{1F4C5} Logs de Hoy: ${e.logs_today}

\u{1F510} Por Acci\xF3n:
\u2022 LOGIN: ${((c=e.logs_by_action)==null?void 0:c.LOGIN)||0}
\u2022 VIEW_STATISTICS: ${((g=e.logs_by_action)==null?void 0:g.VIEW_STATISTICS)||0}
\u2022 RESET_PASSWORD: ${((d=e.logs_by_action)==null?void 0:d.RESET_PASSWORD)||0}
\u2022 TEST_POSTMAN: ${((x=e.logs_by_action)==null?void 0:x.TEST_POSTMAN)||0}

\u{1F4CA} Por Tabla:
\u2022 Auth: ${((h=e.logs_by_table)==null?void 0:h.auth)||0}
\u2022 Dashboard: ${((S=e.logs_by_table)==null?void 0:S.dashboard)||0}
\u2022 Users: ${((D=e.logs_by_table)==null?void 0:D.users)||0}`;yield(yield this.alertController.create({header:"\u{1F4CA} Estad\xEDsticas Detalladas",message:t,buttons:["Cerrar"]})).present()})}showActiveUsersModal(){return R(this,null,function*(){let e=this.recentActivity();if(e.length===0){yield(yield this.alertController.create({header:"\u{1F465} Usuarios Activos",message:"No hay datos de usuarios disponibles",buttons:["OK"]})).present();return}let t=e.reduce((d,x)=>{var w,I;let h=x.userId,S=((w=x.user)==null?void 0:w.nombre)||"Usuario Desconocido",D=((I=x.user)==null?void 0:I.correo)||"No disponible";return d[h]||(d[h]={userId:h,userName:S,userEmail:D,count:0,lastAction:x.createdAt,actions:[]}),d[h].count++,d[h].actions.push(x.accion),d},{}),r=Object.values(t).sort((d,x)=>x.count-d.count).slice(0,5),c=r.map(d=>`\u{1F464} ${d.userName}
\u{1F4E7} ${d.userEmail}
\u{1F4CA} ${d.count} acciones
`).join(`
`);yield(yield this.alertController.create({header:"\u{1F465} Top 5 Usuarios M\xE1s Activos",message:c||"No hay usuarios activos",buttons:[{text:"Ver Detalles Completos",handler:()=>{console.log("\u{1F465} Usuarios Activos Detallados:",r),console.log("Revisa la consola para ver los detalles completos de los usuarios activos")}},{text:"Cerrar",role:"cancel"}]})).present()})}loadLogDetails(e){this.isLoadingLogDetail.set(!0),this.auditoriaService.getLogDetails(e).subscribe({next:t=>{console.log("\u2705 Detalles del log cargados:",t),this.selectedLog.set(t),this.isModalOpen.set(!0),this.isLoadingLogDetail.set(!1)},error:t=>{console.error("\u274C Error cargando detalles del log:",t),this.isLoadingLogDetail.set(!1),alert("Error al cargar los detalles del log")}})}loadUserLogs(e){this.auditoriaService.getUserLogs(e,20).subscribe({next:t=>{var d;console.log("\u2705 Logs del usuario cargados:",t);let r=t.data||[],c=(d=r[0])==null?void 0:d.user,g=c?`${c.nombre} ${c.apellido}`:"Usuario";alert(`\u{1F464} LOGS DE ${g.toUpperCase()}

Total de logs: ${r.length}

Los logs se han cargado en la consola para revisi\xF3n.`)},error:t=>{console.error("\u274C Error cargando logs del usuario:",t),alert("Error al cargar los logs del usuario")}})}getOperationIcon(e){switch(e.toUpperCase()){case"CREATE":return"checkmark-circle-outline";case"UPDATE":return"refresh-outline";case"DELETE":return"warning-outline";case"READ":return"eye-outline";default:return"document-text-outline"}}getOperationColor(e){switch(e.toUpperCase()){case"CREATE":return"success";case"UPDATE":return"primary";case"DELETE":return"danger";case"READ":return"medium";default:return"medium"}}formatDateTime(e){return new Date(e).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalOperations(){let e=this.stats();if(!e)return 0;let t=e.operationCounts||e.logs_by_action;return t?Object.values(t).reduce((r,c)=>r+(Number(c)||0),0):0}getOperationPercentage(e){let t=this.stats();if(!t)return 0;let r=this.getTotalOperations(),c=t.operationCounts||t.logs_by_action,g=c==null?void 0:c[e];return r>0?Math.round((Number(g)||0)/r*100):0}getOperationCount(e){let t=this.stats();if(!t)return 0;let r=t.operationCounts||t.logs_by_action;return r&&r[e]||0}getTableCount(e){let t=this.stats();if(!t)return 0;let r=t.logs_by_table;return r&&r[e]||0}trackByUserId(e,t){return t.userId}trackByLogId(e,t){return t.id}getActionIcon(e){switch(e==null?void 0:e.toUpperCase()){case"LOGIN":return"log-in-outline";case"LOGOUT":return"log-out-outline";case"VIEW_STATISTICS":return"eye-outline";case"RESET_PASSWORD":return"key-outline";case"TEST_POSTMAN":return"flask-outline";case"CREATE":return"add-circle-outline";case"UPDATE":return"create-outline";case"DELETE":return"trash-outline";default:return"document-text-outline"}}getActionColorClass(e){switch(e==null?void 0:e.toUpperCase()){case"LOGIN":return"bg-blue-500";case"LOGOUT":return"bg-gray-500";case"VIEW_STATISTICS":return"bg-green-500";case"RESET_PASSWORD":return"bg-yellow-500";case"TEST_POSTMAN":return"bg-purple-500";case"CREATE":return"bg-emerald-500";case"UPDATE":return"bg-orange-500";case"DELETE":return"bg-red-500";default:return"bg-gray-400"}}getActionClass(e){switch(e==null?void 0:e.toUpperCase()){case"LOGIN":return"login";case"VIEW_STATISTICS":return"view";case"RESET_PASSWORD":return"reset";case"TEST_POSTMAN":return"test";default:return"login"}}closeModal(){this.isModalOpen.set(!1),this.selectedLog.set(null),this.isLoadingLogDetail.set(!1)}getTodayLogsCount(){let e=new Date;return e.setHours(0,0,0,0),this.recentActivity().filter(t=>{let r=new Date(t.createdAt);return r.setHours(0,0,0,0),r.getTime()===e.getTime()}).length}getUserInitials(e){return e?e.split(" ").map(t=>t.charAt(0)).join("").substring(0,2).toUpperCase():"U"}getActionDescription(e,t){switch(e==null?void 0:e.toUpperCase()){case"LOGIN":return"Inicio de sesi\xF3n exitoso";case"LOGOUT":return"Cierre de sesi\xF3n";case"VIEW_STATISTICS":return"Consulta de estad\xEDsticas";case"RESET_PASSWORD":return"Restablecimiento de contrase\xF1a";case"TEST_POSTMAN":return"Prueba de API";case"CREATE":return`Creaci\xF3n en ${t}`;case"UPDATE":return`Actualizaci\xF3n en ${t}`;case"DELETE":return`Eliminaci\xF3n en ${t}`;default:return`Acci\xF3n en ${t}`}}updatePagination(){let t=this.filteredLogs().length,r=this.pagination().itemsPerPage,g=(this.pagination().currentPage-1)*r,d=Math.min(g+r,t);this.pagination.set(L(A({},this.pagination()),{totalItems:t,totalPages:Math.ceil(t/r),startIndex:g,endIndex:d}))}applyFilters(){let e=this.recentActivity(),t=this.filters(),r=e.filter(c=>{var g,d;if(t.userId&&!((d=(g=c.user)==null?void 0:g.nombre)!=null&&d.toLowerCase().includes(t.userId.toLowerCase()))||t.action&&t.action!=="all"&&c.accion!==t.action)return!1;if(t.startDate){let x=new Date(c.createdAt),h=new Date(t.startDate);if(x<h)return!1}if(t.endDate){let x=new Date(c.createdAt),h=new Date(t.endDate);if(h.setHours(23,59,59,999),x>h)return!1}return!0});this.filteredLogs.set(r),this.pagination.set(L(A({},this.pagination()),{currentPage:1})),this.updatePagination()}onFilterChange(e,t){this.filters.set(L(A({},this.filters()),{[e]:t})),this.applyFilters()}resetFilters(){this.filters.set({userId:"",action:"",startDate:"",endDate:""}),this.filteredLogs.set(this.recentActivity()),this.pagination.set(L(A({},this.pagination()),{currentPage:1})),this.updatePagination()}getPaginatedLogs(){let e=this.filteredLogs(),t=this.pagination(),r=(t.currentPage-1)*t.itemsPerPage,c=r+t.itemsPerPage;return e.slice(r,c)}goToPage(e){let t=this.pagination();e>=1&&e<=t.totalPages&&(this.pagination.set(L(A({},t),{currentPage:e})),this.updatePagination())}getPageNumbers(){let e=this.pagination(),t=[],r=5,c=Math.max(1,e.currentPage-Math.floor(r/2)),g=Math.min(e.totalPages,c+r-1);g-c<r-1&&(c=Math.max(1,g-r+1));for(let d=c;d<=g;d++)t.push(d);return t}getUniqueActions(){let e=this.recentActivity().map(t=>t.accion);return[...new Set(e)]}formatJsonData(e){if(!e)return"No disponible";try{if(typeof e=="string"){let t=JSON.parse(e);return JSON.stringify(t,null,2)}else return JSON.stringify(e,null,2)}catch{return typeof e=="string"?e:JSON.stringify(e,null,2)}}formatDetailedDateTime(e){return new Date(e).toLocaleString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}getTimestamp(e){return new Date(e).getTime()}};u.\u0275fac=function(t){return new(t||u)(V(Je),V(Z),V(he))},u.\u0275cmp=J({type:u,selectors:[["app-auditoria-dashboard"]],decls:15,vars:4,consts:[[1,"bg-gradient-to-r","from-blue-600","to-blue-800"],["slot","start"],[1,"text-white"],[1,"text-white","font-bold","text-xl"],[1,"bg-gradient-to-br","from-gray-50","to-blue-50"],["slot","fixed",3,"ionRefresh"],[1,"p-4","max-w-7xl","mx-auto"],["class","space-y-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[3,"ionDidDismiss","isOpen"],[1,"space-y-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["class","animate-pulse",4,"ngFor","ngForOf"],[1,"animate-pulse"],[1,"p-6"],[1,"flex","flex-col","items-center","space-y-3"],[1,"w-12","h-12","bg-gray-300","rounded-full"],[1,"w-16","h-6","bg-gray-300","rounded"],[1,"w-20","h-4","bg-gray-200","rounded"],[1,"text-center","py-12"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-8","max-w-md","mx-auto"],["name","alert-circle-outline",1,"text-6xl","text-red-500","mb-4"],[1,"text-xl","font-semibold","text-red-700","mb-2"],[1,"text-red-600","mb-4"],["fill","solid","color","danger",3,"click"],["name","refresh-outline","slot","start"],[1,"grid","grid-cols-4","gap-4"],[1,"stats-card","cursor-pointer","hover:shadow-lg","transition-all","duration-300",2,"background","linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)","border","2px solid #5ccedf","box-shadow","0 4px 6px -1px rgba(92, 206, 223, 0.1)",3,"click"],[1,"p-4","text-center"],["name","document-text-outline",1,"text-3xl","mb-3",2,"color","#5ccedf"],[1,"text-sm","font-semibold","text-gray-600","mb-2"],[1,"text-3xl","font-bold",2,"color","#374151"],[1,"stats-card","hover:shadow-lg","transition-all","duration-300",2,"background","linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)","border","2px solid #5ccedf","box-shadow","0 4px 6px -1px rgba(92, 206, 223, 0.1)"],["name","calendar-outline",1,"text-3xl","mb-3",2,"color","#5ccedf"],["name","shield-checkmark-outline",1,"text-3xl","mb-3",2,"color","#5ccedf"],["name","grid-outline",1,"text-3xl","mb-3",2,"color","#5ccedf"],[1,"border-0","overflow-hidden"],[1,"section-header"],["name","stats-chart-outline",1,"text-xl"],[1,"operations-grid"],[1,"operation-item"],[1,"icon-wrapper","blue"],["name","log-in-outline",1,"text-xl"],[1,"count"],[1,"label"],[1,"icon-wrapper","green"],["name","eye-outline",1,"text-xl"],[1,"icon-wrapper","yellow"],["name","key-outline",1,"text-xl"],[1,"icon-wrapper","purple"],["name","flask-outline",1,"text-xl"],[1,"glass-card"],["name","time-outline",1,"text-lg"],["fill","clear","size","small",1,"ml-auto","text-white",3,"click"],[1,"p-0"],[1,"p-4","border-b","border-gray-200","bg-gray-50"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3","text-sm"],[1,"block","text-gray-600","mb-1"],["type","text","placeholder","Filtrar por nombre",1,"w-full","p-2","border","rounded","text-sm",3,"input","value"],[1,"w-full","p-2","border","rounded","text-sm",3,"change","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-end"],[1,"px-4","py-2","bg-gray-500","text-white","text-sm","hover:bg-gray-600","transition-all","duration-200","shadow-sm","hover:shadow-md","font-medium",2,"border-radius","1rem","min-width","fit-content","white-space","nowrap",3,"click"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-100","border-b"],[1,"text-xs","font-medium","text-gray-600","uppercase","tracking-wider"],[1,"px-4","py-3","text-left"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 cursor-pointer transition-colors",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"px-6","py-4","border-t","border-gray-200","bg-white",2,"background","linear-gradient(135deg, rgba(255,255,255,0.95), rgba(248,250,252,0.95))","backdrop-filter","blur(10px)"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","gap-4"],[1,"flex","items-center","text-sm","text-gray-600"],["name","document-text-outline",1,"mr-2","text-gray-400"],[1,"font-medium"],[1,"text-blue-600","font-semibold"],[1,"flex","items-center","space-x-1"],["type","button",1,"flex","items-center","px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-50","hover:border-gray-400","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","shadow-sm",2,"border-radius","2rem",3,"click","disabled"],["name","chevron-back-outline"],[1,"flex","space-x-1","mx-2"],["type","button","class","min-w-[40px] h-10 px-3 py-2 text-sm font-medium border transition-all duration-200 hover:shadow-sm",3,"class","style","click",4,"ngFor","ngForOf"],["name","chevron-forward-outline"],[1,"flex","items-center","justify-center","mt-3","pt-3","border-t","border-gray-100"],[1,"text-xs","text-gray-500"],[1,"mx-2"],[1,"glass-card","operations-card"],["name","flash-outline",1,"text-lg"],[1,"p-4"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-4"],[1,"operation-btn","bg-gradient-to-r","from-blue-500","to-blue-600","hover:from-blue-600","hover:to-blue-700","transition-all","duration-300","transform","hover:scale-105","shadow-lg","hover:shadow-xl",3,"click"],["name","list-outline",1,"text-xl","mb-2"],[1,"text-sm","font-medium"],[1,"text-xs","opacity-80","mt-1"],[1,"operation-btn","bg-gradient-to-r","from-green-500","to-green-600","hover:from-green-600","hover:to-green-700","transition-all","duration-300","transform","hover:scale-105","shadow-lg","hover:shadow-xl",3,"click"],["name","analytics-outline",1,"text-xl","mb-2"],[1,"operation-btn","bg-gradient-to-r","from-purple-500","to-purple-600","hover:from-purple-600","hover:to-purple-700","transition-all","duration-300","transform","hover:scale-105","shadow-lg","hover:shadow-xl",3,"click"],["name","people-outline",1,"text-xl","mb-2"],[3,"value"],[1,"hover:bg-gray-50","cursor-pointer","transition-colors",3,"click"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-3"],[1,"flex","items-center"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-white","text-xs","font-medium","mr-3",2,"background","linear-gradient(135deg, #5ccedf, #4db8cc)"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","font-medium",2,"color","#5ccedf"],[1,"text-sm","text-gray-900"],[1,"px-4","py-3","text-sm","text-gray-600"],["colspan","5",1,"px-4","py-8","text-center","text-gray-500"],["name","document-text-outline",1,"text-3xl","mb-2"],["type","button",1,"min-w-[40px]","h-10","px-3","py-2","text-sm","font-medium","border","transition-all","duration-200","hover:shadow-sm",3,"click"],[2,"background","linear-gradient(135deg, #5ccedf 0%, #4db8cc 100%)","color","white","--padding-top","0.75rem","--padding-bottom","0.75rem","--min-height","60px"],[2,"color","white","font-size","1.2rem","font-weight","600","padding","0.5rem 0","display","flex","align-items","center","justify-content","center"],["name","document-text-outline",2,"margin-right","0.5rem","font-size","1.3rem"],["slot","end",2,"margin-right","0.5rem"],[2,"color","white","--padding-start","8px","--padding-end","8px",3,"click"],["name","close","slot","icon-only",2,"font-size","1.4rem"],[2,"--padding-top","1.5rem","--padding-bottom","2rem","--padding-start","1.5rem","--padding-end","1.5rem"],["class","text-center py-16",4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"text-center","py-16"],[1,"mt-8","text-gray-600","text-base"],[1,"space-y-8"],[2,"margin","0","box-shadow","0 4px 12px rgba(0,0,0,0.1)","border-radius","12px","overflow","hidden"],[2,"background","linear-gradient(135deg, #5ccedf 0%, #4db8cc 100%)","color","white","padding","1.5rem 2rem 2rem 2rem"],[1,"flex","items-center","text-lg","mb-3"],[2,"margin-right","0.75rem","font-size","1.5rem",3,"name"],[2,"font-weight","600"],[2,"color","rgba(255,255,255,0.9)","font-size","0.9rem","margin-top","0.5rem"],[2,"padding","2rem"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","mb-8"],[2,"padding","1.25rem","background","#f8fafc","border-radius","10px","border","1px solid #e2e8f0"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#475569","margin-bottom","0.75rem","text-transform","uppercase","letter-spacing","0.025em"],[2,"font-family","'Courier New', monospace","font-size","0.9rem","color","#1e293b","word-break","break-all"],[2,"font-size","0.9rem","color","#1e293b","font-weight","500"],["style","padding: 1.25rem; background: #f8fafc; border-radius: 10px; border: 1px solid #e2e8f0;",4,"ngIf"],[2,"padding","1.25rem","background","linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)","border-radius","10px","border","1px solid #93c5fd"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#1e40af","margin-bottom","1rem","text-transform","uppercase","letter-spacing","0.025em"],[2,"width","3rem","height","3rem","border-radius","50%","display","flex","align-items","center","justify-content","center","color","white","font-size","1rem","font-weight","600","margin-right","1rem","background","linear-gradient(135deg, #5ccedf, #4db8cc)","box-shadow","0 2px 8px rgba(92, 206, 223, 0.3)"],[2,"flex","1"],[2,"font-size","0.95rem","font-weight","600","color","#1e293b","margin-bottom","0.25rem"],[2,"font-size","0.8rem","color","#64748b"],[2,"font-family","'Courier New', monospace","font-size","0.9rem","color","#1e293b"],[2,"padding","1.25rem","background","#fefce8","border-radius","10px","border","1px solid #facc15","margin-bottom","2rem"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#a16207","margin-bottom","1rem","text-transform","uppercase","letter-spacing","0.025em"],[2,"font-size","0.8rem","color","#374151","line-height","1.6","word-break","break-all","font-family","'Courier New', monospace","background","white","padding","0.75rem","border-radius","6px","border","1px solid #e5e7eb"],["style","padding: 1.25rem; background: #fef2f2; border-radius: 10px; border: 1px solid #fca5a5; margin-bottom: 2rem;",4,"ngIf"],["style","padding: 1.25rem; background: #f0fdf4; border-radius: 10px; border: 1px solid #86efac; margin-bottom: 2rem;",4,"ngIf"],["style","padding: 1.25rem; background: #fffbeb; border-radius: 10px; border: 1px solid #fbbf24; margin-bottom: 2rem;",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[2,"background","white","padding","1rem","border-radius","8px","border","1px solid #e5e7eb"],[2,"font-weight","600","color","#475569","font-size","0.8rem"],[2,"color","#64748b","font-size","0.8rem","font-family","'Courier New', monospace","margin-top","0.25rem","display","block"],[2,"padding","1.25rem","background","#fef2f2","border-radius","10px","border","1px solid #fca5a5","margin-bottom","2rem"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#dc2626","margin-bottom","1rem","text-transform","uppercase","letter-spacing","0.025em"],[2,"font-size","0.8rem","background","white","padding","1rem","border-radius","8px","border","1px solid #e5e7eb","color","#374151","line-height","1.5","overflow-x","auto","white-space","pre-wrap"],[2,"padding","1.25rem","background","#f0fdf4","border-radius","10px","border","1px solid #86efac","margin-bottom","2rem"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#16a34a","margin-bottom","1rem","text-transform","uppercase","letter-spacing","0.025em"],[2,"padding","1.25rem","background","#fffbeb","border-radius","10px","border","1px solid #fbbf24","margin-bottom","2rem"],[2,"display","block","font-size","0.85rem","font-weight","600","color","#d97706","margin-bottom","1rem","text-transform","uppercase","letter-spacing","0.025em"]],template:function(t,r){t&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),m(3,"ion-menu-button",2),i(),n(4,"ion-title",3),o(5," \u{1F4CA} Panel de Auditor\xEDa "),i()()(),n(6,"ion-content",4)(7,"ion-refresher",5),v("ionRefresh",function(g){return r.doRefresh(g)}),m(8,"ion-refresher-content"),i(),n(9,"div",6),E(10,Ke,3,2,"div",7)(11,Qe,10,1,"div",8)(12,nt,170,29,"div",7),i()(),n(13,"ion-modal",9),v("ionDidDismiss",function(){return r.closeModal()}),E(14,ct,11,2,"ng-template"),i()),t&2&&(l(10),_("ngIf",r.isLoading()),l(),_("ngIf",!r.isLoading()&&r.error()),l(),_("ngIf",!r.isLoading()&&!r.error()),l(),_("isOpen",r.isModalOpen()))},dependencies:[Q,q,K,ce,de,fe,be,te,xe,ie,oe,se,ue,me,ne,ge,ee,pe,re,le,ae],styles:['ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #5ccedf, #4db8cc);--color: white}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff!important;font-weight:700;font-size:1.25rem}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{color:#fff!important;--color: white}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{color:#fff!important}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.glass-card[_ngcontent-%COMP%]{background:#ffffff40;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.18);box-shadow:0 8px 32px #1f26875e;border-radius:16px;transition:all .3s ease}.glass-card[_ngcontent-%COMP%]:hover{background:#ffffff59;transform:translateY(-4px);box-shadow:0 12px 40px #1f268773}ion-card[_ngcontent-%COMP%]{border-radius:12px;border:1px solid rgba(255,255,255,.18);background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);box-shadow:0 4px 16px #0000001a;transition:all .2s ease;animation:_ngcontent-%COMP%_slideInUp .5s ease-out;margin:8px 0}ion-card[_ngcontent-%COMP%]:hover{border-color:#ffffff4d;background:#ffffff26;box-shadow:0 8px 24px #8c959f33;transform:translateY(-2px)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:12px 16px!important}.stats-card[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.2);margin:4px 0}.stats-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px!important}.stats-card.blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5ccedfcc,#4db8cccc);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);color:#fff;border-color:#ffffff4d}.stats-card.green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a7f37cc,#116329cc);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);color:#fff;border-color:#ffffff4d}.stats-card.purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8250dfcc,#6f42c1cc);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);color:#fff;border-color:#ffffff4d}.stats-card.orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d1470acc,#bc4c00cc);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);color:#fff;border-color:#ffffff4d}.section-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#24292fe6,#32383fe6);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;padding:12px 16px;border-radius:12px 12px 0 0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;display:flex;align-items:center;gap:8px}.operations-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1px;background:#d0d7de80;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border-radius:0 0 12px 12px;overflow:hidden}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]{background:#fffc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:12px;text-align:center;transition:all .2s ease}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]:hover{background:#f6f8fae6}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 8px}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .icon-wrapper.blue[_ngcontent-%COMP%]{background:#5ccedf33;color:#4db8cc}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .icon-wrapper.green[_ngcontent-%COMP%]{background:#dcfce7cc;color:#166534}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .icon-wrapper.yellow[_ngcontent-%COMP%]{background:#fef3c7cc;color:#d97706}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .icon-wrapper.purple[_ngcontent-%COMP%]{background:#f3e8ffcc;color:#7c3aed}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#24292f;margin-bottom:2px}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#656d76;margin-bottom:6px}.operations-grid[_ngcontent-%COMP%]   .operation-item[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{--background: rgba(246, 248, 250, .9);--color: #24292f;font-size:.65rem;font-weight:600;height:20px}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;border-radius:8px;transition:all .2s ease;border:1px solid rgba(255,255,255,.2);background:#ffffff1a;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);margin-bottom:6px}.user-item[_ngcontent-%COMP%]:hover{background:#f6f8facc;border-color:#d0d7de80}.user-item[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:14px;background:linear-gradient(135deg,#0969da,#8250df);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.75rem;margin-right:8px}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{flex:1}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;color:#24292f;margin-bottom:1px;font-size:.875rem}.user-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{font-size:.75rem;color:#656d76}.user-item[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{--background: #0969da;--color: white;font-weight:600;font-size:.75rem;height:22px}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:8px 12px;border-radius:8px;border:1px solid rgba(208,215,222,.3);background:#ffffff1a;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:all .2s ease;margin-bottom:6px}.activity-item[_ngcontent-%COMP%]:hover{border-color:#0969da66;background:#ffffff26;box-shadow:0 3px 8px #0969da1f}.activity-item[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-right:8px;flex-shrink:0}.activity-item[_ngcontent-%COMP%]   .activity-icon.login[_ngcontent-%COMP%]{background:#0969da;color:#fff}.activity-item[_ngcontent-%COMP%]   .activity-icon.view[_ngcontent-%COMP%]{background:#1a7f37;color:#fff}.activity-item[_ngcontent-%COMP%]   .activity-icon.reset[_ngcontent-%COMP%]{background:#d1470a;color:#fff}.activity-item[_ngcontent-%COMP%]   .activity-icon.test[_ngcontent-%COMP%]{background:#8250df;color:#fff}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]{flex:1;min-width:0}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{font-weight:600;color:#24292f;margin-bottom:1px;font-size:.875rem}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .action-meta[_ngcontent-%COMP%]{font-size:.75rem;color:#656d76}.activity-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .action-time[_ngcontent-%COMP%]{font-size:.65rem;color:#8b949e}.github-button[_ngcontent-%COMP%]{background:#f6f8facc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(208,215,222,.4);color:#24292f;border-radius:8px;padding:12px 16px;transition:all .2s ease}.github-button[_ngcontent-%COMP%]:hover{background:#f3f4f6e6;border-color:#0969da66;color:#0969da}.github-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.github-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}.github-button[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.grid[_ngcontent-%COMP%]{display:grid;gap:8px}.grid.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}@media (min-width: 768px){.grid.grid-cols-2.md\\\\[_ngcontent-%COMP%]:grid-cols-4{grid-template-columns:repeat(4,1fr)}}.space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:16px}.space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:4px}.loading-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f6f8facc 25%,#fffc,#f6f8facc 75%);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.log-detail-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:16px;padding:20px;max-height:80vh;overflow-y:auto}.operation-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem 1rem;border:none;border-radius:12px;color:#fff;font-weight:600;text-align:center;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:120px;position:relative;overflow:hidden}.operation-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.operation-btn[_ngcontent-%COMP%]:hover:before{left:100%}.operation-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.operation-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{display:block;margin-top:.25rem;font-size:.75rem;opacity:.9}']});let s=u;return s})();export{yt as AuditoriaDashboardPage};
