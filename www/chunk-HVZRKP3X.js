import{a as $,b as U}from"./chunk-3TTXIYQD.js";import{a as G}from"./chunk-ELO4S7WW.js";import{a as H}from"./chunk-5IKKLCCH.js";import{b as R}from"./chunk-OKK4U6ED.js";import"./chunk-B4FAM7CU.js";import{c as I,d as T,e as k,f as z,g as A,h as D,j as F,k as B,l as L,o as V,q,r as N,u as j,v as Y}from"./chunk-EDQZMFWJ.js";import"./chunk-AL5IVEPX.js";import{A as b,B as P,I as x,J as i,Ja as E,Ka as S,M as v,Q as h,Sa as w,T as l,Y as e,Z as t,Zb as y,_ as g,ca as M,da as C,ea as f,ma as n,na as m,oa as _,pa as O,x as p}from"./chunk-WYTV4Y2I.js";import"./chunk-OQQFKM4V.js";import"./chunk-QUJFQN2Y.js";import"./chunk-J7JITKZC.js";import"./chunk-BOXIHRYD.js";import"./chunk-OHGEMRV5.js";import"./chunk-KLXKYU2M.js";import"./chunk-SIK2P2H5.js";import"./chunk-4BNUL4C7.js";import"./chunk-M66VC23L.js";import"./chunk-JMWLUS2D.js";import"./chunk-EUVXMWSF.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-USUO6L27.js";import"./chunk-CKP3SGE2.js";import"./chunk-2LFY4CRM.js";import"./chunk-PJL56ILQ.js";import"./chunk-NVWEJ7GR.js";import"./chunk-UVAVEIEI.js";import"./chunk-E6CW6KXY.js";import"./chunk-Z3EESIK6.js";import"./chunk-FXFZIWDD.js";import"./chunk-6WKZVARI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as u}from"./chunk-LNJ3S2LQ.js";function W(r,c){if(r&1&&(e(0,"div",12)(1,"ion-chip",13),g(2,"ion-icon",14),e(3,"ion-label"),n(4),t()()()),r&2){let a=f();i(4),m(a.getSearchSummary())}}function X(r,c){if(r&1&&(e(0,"div",15)(1,"ion-item",16),g(2,"ion-icon",17),e(3,"ion-label",18),n(4),t()()()),r&2){let a=f();i(4),m(a.searchError())}}function Z(r,c){r&1&&(e(0,"div",19),g(1,"ion-spinner",20),t())}function tt(r,c){if(r&1&&(e(0,"div",38),g(1,"ion-icon",39),e(2,"div")(3,"div",40),n(4,"Amnist\xEDa Vigente"),t(),e(5,"div",41),n(6,"Aproveche la amnist\xEDa hasta el: "),e(7,"strong"),n(8),t()()()()),r&2){let a=f().ngIf;i(8),m(a.fechaFinAmnistia)}}function et(r,c){if(r&1&&(e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),t(),e(5,"td"),n(6),t(),e(7,"td"),n(8),t(),e(9,"td"),n(10),t(),e(11,"td")(12,"strong"),n(13),t()()()),r&2){let a=c.$implicit;i(2),m(a.year),i(2),m(a.impuesto),i(2),m(a.trenDeAseo),i(2),m(a.tasaBomberos),i(2),m(a.recargo),i(3),m(a.total)}}function nt(r,c){if(r&1){let a=M();e(0,"div")(1,"div",21)(2,"div",22)(3,"div",23),g(4,"ion-icon",24),t(),e(5,"div")(6,"div",25),n(7),t(),e(8,"div",26),n(9),t()()(),e(10,"div",27)(11,"div")(12,"strong"),n(13,"Clave Catastral:"),t(),n(14),t(),e(15,"div")(16,"strong"),n(17,"Colonia:"),t(),n(18),t(),e(19,"div")(20,"strong"),n(21,"Fecha:"),t(),n(22),t()()(),h(23,tt,9,1,"div",28),e(24,"div",29)(25,"div",30),n(26,"Detalle de la Mora"),t(),e(27,"div",31)(28,"table")(29,"thead")(30,"tr")(31,"th"),n(32,"A\xF1o"),t(),e(33,"th"),n(34,"Impuesto"),t(),e(35,"th"),n(36,"T.Aseo"),t(),e(37,"th"),n(38,"Bomberos"),t(),e(39,"th"),n(40,"Recargo"),t(),e(41,"th"),n(42,"Total"),t()()(),e(43,"tbody"),h(44,et,14,6,"tr",32),t()()(),e(45,"div",33)(46,"span"),n(47,"Total: "),t(),e(48,"span",34),n(49),t()()(),e(50,"div",35)(51,"ion-button",36),C("click",function(){b(a);let s=f();return P(s.imprimirRecibo())}),g(52,"ion-icon",37),n(53," Imprimir recibo "),t()()()}if(r&2){let a=c.ngIf,o=f();i(7),m(a.nombre),i(2),m(a.identidad),i(5),_(" ",a.claveCatastral,""),i(4),_(" ",a.colonia,""),i(4),O(" ",a.fecha," - ",a.hora,""),i(),l("ngIf",a.amnistiaVigente),i(21),l("ngForOf",a.detallesMora),i(5),m(a.totalGeneral),i(2),l("disabled",o.isLoading()||!o.estadoCuenta())}}var J=(()=>{let c=class c{constructor(){this.estadoCuentaService=p($),this.authService=p(R),this.toastController=p(j),this.printingService=p(G),this.bluetoothService=p(H),this.estadoCuenta=x(null),this.isLoading=x(!1),this.lastSearchParams=void 0,this.searchError=x("")}ngOnInit(){}onSearch(o){if(!o.claveCatastral&&!o.dni){this.presentToast("Por favor, ingrese un valor de b\xFAsqueda.","warning");return}this.isLoading.set(!0),this.searchError.set(""),this.lastSearchParams=o,this.estadoCuentaService.getEstadoDeCuentaConAmnistiaBySearch(o).subscribe({next:s=>{this.estadoCuenta.set(s),this.isLoading.set(!1),this.presentToast("Estado de cuenta consultado exitosamente.","success")},error:s=>{console.error("Error al consultar estado de cuenta:",s),this.isLoading.set(!1),this.estadoCuenta.set(null),s.status===404?(this.searchError.set("No se encontraron datos para los par\xE1metros de b\xFAsqueda proporcionados."),this.presentToast("No se encontraron datos.","warning")):s.status===400?(this.searchError.set("Par\xE1metros de b\xFAsqueda inv\xE1lidos. Verifique los datos ingresados."),this.presentToast("Datos de b\xFAsqueda inv\xE1lidos.","danger")):s.status===500?(this.searchError.set("Error interno del servidor. Intente nuevamente m\xE1s tarde."),this.presentToast("Error del servidor. Intente m\xE1s tarde.","danger")):(this.searchError.set("Error al consultar el estado de cuenta. Verifique su conexi\xF3n."),this.presentToast("Error al consultar el estado de cuenta.","danger"))}})}onClearSearch(){this.estadoCuenta.set(null),this.searchError.set(""),this.lastSearchParams=void 0}presentToast(o,s){return u(this,null,function*(){(yield this.toastController.create({message:o,duration:3e3,color:s,position:"top"})).present()})}imprimirRecibo(){return u(this,null,function*(){let o=this.estadoCuenta();if(!o){this.presentToast("No hay datos para imprimir.","warning");return}if(!(yield this.bluetoothService.isConnected())){this.presentToast("No hay ninguna impresora conectada. Configure la impresora en Configuraci\xF3n > Bluetooth.","danger");return}try{this.presentToast("Preparando impresi\xF3n...","success");let d=this.printingService.formatEstadoCuenta(o,this.lastSearchParams,!0);yield this.bluetoothService.print(d),this.presentToast("Recibo con amnist\xEDa enviado a la impresora exitosamente.","success")}catch(d){console.error("Error al imprimir:",d),this.presentToast("Error al imprimir el recibo. Verifique la conexi\xF3n de la impresora.","danger")}})}getSearchSummary(){let o=this.lastSearchParams;return o?o.claveCatastral?`Clave Catastral: ${o.claveCatastral}`:o.dni?`DNI: ${o.dni}`:"":""}};c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=v({type:c,selectors:[["app-estado-cuenta-amnistia"]],decls:14,vars:6,consts:[[1,"amnistia-header"],[1,"amnistia-toolbar"],["slot","start"],[1,"amnistia-title"],[1,"estado-cuenta-amnistia-bg",3,"fullscreen"],[1,"estado-cuenta-container"],[1,"search-form","glass-card"],["placeholder","Buscar estado de cuenta...",3,"search","clear","disabled"],["class","search-summary",4,"ngIf"],["class","search-error",4,"ngIf"],["class","ion-text-center amnistia-loading",4,"ngIf"],[4,"ngIf"],[1,"search-summary"],["color","primary","outline","true"],["name","search-outline"],[1,"search-error"],["color","danger","lines","none"],["name","alert-circle","slot","start"],[1,"ion-text-wrap"],[1,"ion-text-center","amnistia-loading"],["name","crescent"],[1,"amnistia-card","glass-card"],[1,"amnistia-card-header"],[1,"amnistia-avatar"],["name","person-circle-outline","color","primary",2,"font-size","2.5rem"],[1,"amnistia-nombre"],[1,"amnistia-identidad"],[1,"amnistia-card-content"],["class","amnistia-alert glass-card",4,"ngIf"],[1,"amnistia-table-card","glass-card"],[1,"amnistia-table-title"],[1,"amnistia-table-responsive"],[4,"ngFor","ngForOf"],[1,"amnistia-total-row"],[1,"amnistia-total"],[1,"amnistia-btn-row"],["color","primary",3,"click","disabled"],["name","print-outline","slot","start"],[1,"amnistia-alert","glass-card"],["name","shield-checkmark-outline","color","success",2,"font-size","2rem"],[1,"amnistia-alert-title"],[1,"amnistia-alert-desc"]],template:function(s,d){s&1&&(e(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),g(3,"ion-menu-button"),t(),e(4,"ion-title",3),n(5,"Estado de Cuenta con Amnist\xEDa"),t()()(),e(6,"ion-content",4)(7,"div",5)(8,"div",6)(9,"app-search-input",7),C("search",function(Q){return d.onSearch(Q)})("clear",function(){return d.onClearSearch()}),t(),h(10,W,5,1,"div",8)(11,X,5,1,"div",9),t(),h(12,Z,2,0,"div",10)(13,nt,54,10,"div",11),t()()),s&2&&(i(6),l("fullscreen",!0),i(3),l("disabled",d.isLoading()),i(),l("ngIf",d.lastSearchParams),i(),l("ngIf",d.searchError()),i(),l("ngIf",d.isLoading()),i(),l("ngIf",!d.isLoading()&&d.estadoCuenta()))},dependencies:[Y,I,T,k,z,A,D,F,B,L,V,q,N,w,E,S,y,U],styles:['@charset "UTF-8";.estado-cuenta-amnistia-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fcfd,#e8f7f9,#d4f1f5);min-height:100vh;padding:25px}.estado-cuenta-container[_ngcontent-%COMP%]{padding:25px;max-width:1400px;margin:0 auto}.glass-card[_ngcontent-%COMP%]{background:#ffffff40;-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);border-radius:30px;border:3px solid rgba(255,255,255,.3);box-shadow:0 15px 45px #5ccedf1a,0 5px 15px #0000000d;padding:35px;margin-bottom:25px;transition:all .4s ease}.glass-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 25px 60px #5ccedf26,0 10px 25px #0000001a;border-color:#5ccedf66}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{--background: rgba(92, 206, 223, .25);--color: #2c3e50;font-size:1.1rem;font-weight:900;padding:12px 20px;border-radius:25px;border:2px solid rgba(92,206,223,.3);transition:all .3s ease;cursor:pointer}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{--background: rgba(92, 206, 223, .35);transform:translateY(-2px);box-shadow:0 8px 20px #5ccedf33}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px;font-weight:900;font-size:1.2rem;color:#5ccedf}.search-error[_ngcontent-%COMP%]{margin-top:20px}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: rgba(231, 76, 60, .2);--border-radius: 18px;--padding-start: 20px;--padding-end: 20px;margin-bottom:0;border:3px solid rgba(231,76,60,.3);transition:all .3s ease;cursor:pointer}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--background: rgba(231, 76, 60, .25);transform:translateY(-2px);box-shadow:0 8px 20px #e74c3c33}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:12px;color:#e74c3c;font-size:1.3rem;font-weight:900}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5;font-weight:900;color:#2c3e50}ion-card[_ngcontent-%COMP%]{margin:25px;padding:30px;background:#fff3;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:25px;border:3px solid rgba(92,206,223,.3);box-shadow:0 10px 35px #5ccedf26;transition:all .3s ease}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 45px #5ccedf33;border-color:#5ccedf80}ion-card-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:900;color:#2c3e50;margin-bottom:20px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.amnesty-info[_ngcontent-%COMP%]{background:#5ccedf33;border-radius:20px;padding:25px;margin-top:25px;border:3px solid rgba(92,206,223,.4);transition:all .3s ease}.amnesty-info[_ngcontent-%COMP%]:hover{background:#5ccedf40;transform:translateY(-3px);box-shadow:0 10px 30px #5ccedf33}.amnesty-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-weight:900;font-size:1.5rem;text-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:15px}.amnesty-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5ccedf;font-weight:900;font-size:1.1rem;line-height:1.6;margin:0;text-shadow:0 1px 2px rgba(92,206,223,.3)}.amnesty-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#5ccedf;font-size:1.7rem;font-weight:900;filter:drop-shadow(0 2px 4px rgba(92,206,223,.3))}@media (max-width: 768px){.estado-cuenta-amnistia-bg[_ngcontent-%COMP%], .estado-cuenta-container[_ngcontent-%COMP%]{padding:20px}.glass-card[_ngcontent-%COMP%]{padding:25px;margin-bottom:20px}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-size:1rem;font-weight:900;padding:10px 16px}.search-form[_ngcontent-%COMP%]   .search-summary[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:900}.search-error[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}ion-card[_ngcontent-%COMP%]{margin:16px;padding:20px}ion-card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.amnesty-info[_ngcontent-%COMP%]{padding:16px}.amnesty-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.amnesty-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700}}',".amnistia-bg[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #e0f7fa 0%, #f8fafc 100%) !important;background:linear-gradient(135deg,#e0f7fa,#f8fafc)!important}.amnistia-header[_ngcontent-%COMP%], .amnistia-toolbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#5ccedf 60%,#a4c9f5)!important;box-shadow:0 2px 12px #5ccedf33}.amnistia-title[_ngcontent-%COMP%]{color:#222;font-weight:700;letter-spacing:.5px}.amnistia-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:2rem .5rem 2.5rem}.glass-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:1.2rem;box-shadow:0 2px 16px #5ccedf22;margin-bottom:1.2rem;padding:1.2rem 1.2rem 1rem}.amnistia-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{background:transparent;border-radius:1rem;box-shadow:0 1px 6px #5ccedf11;margin-bottom:.5rem}.amnistia-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem;margin-bottom:.7rem}.amnistia-avatar[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:50%;background:linear-gradient(135deg,#5ccedf 60%,#a4c9f5);display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #5ccedf33;border:2.5px solid #fff}.amnistia-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff!important;filter:drop-shadow(0 1px 2px #2ca0b899)}.amnistia-nombre[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#2ca0b8}.amnistia-identidad[_ngcontent-%COMP%]{font-size:1rem;color:#495057;opacity:.85}.amnistia-card-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:.3rem;font-size:1rem}.amnistia-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:#e6fff6;border:1.5px solid #2dd36f44;color:#059669;margin-bottom:1.2rem;padding:1rem 1.2rem}.amnistia-alert-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#059669}.amnistia-alert-desc[_ngcontent-%COMP%]{font-size:1rem}.amnistia-table-card[_ngcontent-%COMP%]{padding:1.2rem .5rem .7rem}.amnistia-table-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2ca0b8;margin-bottom:.7rem}.amnistia-table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.amnistia-table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.98rem}.amnistia-table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .amnistia-table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.45rem .5rem;text-align:center}.amnistia-table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#e0f7fa;color:#2ca0b8;font-weight:600}.amnistia-table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8fafc}.amnistia-total-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:1.2rem;font-size:1.1rem;font-weight:600;margin-top:.7rem;color:#2ca0b8}.amnistia-total[_ngcontent-%COMP%]{font-size:1.2rem;color:#059669;font-weight:700}.amnistia-btn-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.amnistia-loading[_ngcontent-%COMP%]{margin:2.5rem 0 2rem}@media (max-width: 600px){.amnistia-container[_ngcontent-%COMP%]{padding:1rem .1rem 1.5rem}.glass-card[_ngcontent-%COMP%]{padding:.7rem .5rem;margin-bottom:.7rem}.amnistia-table-title[_ngcontent-%COMP%]{font-size:1rem}.amnistia-table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .amnistia-table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.3rem .2rem;font-size:.93rem}.amnistia-total-row[_ngcontent-%COMP%]{font-size:1rem;gap:.7rem}}"]});let r=c;return r})();var _t=[{path:"",component:J}];export{_t as routes};
