import{a as l}from"./chunk-HENECHRK.js";import{Pa as c,Qa as m,c as u,s as o,u as h,w as d}from"./chunk-2VKWM52Q.js";var f=(()=>{let s=class s{constructor(){this.http=d(m),this.apiUrl=`${l.apiUrl}/locales`,this.localesSubject=new u([]),this.locales$=this.localesSubject.asObservable()}getLocales(t={}){let e=new c;return t.page&&(e=e.set("page",t.page.toString())),t.limit&&(e=e.set("limit",t.limit.toString())),t.search&&(e=e.set("search",t.search)),t.estado&&(e=e.set("estado",t.estado)),t.mercadoId&&(e=e.set("mercadoId",t.mercadoId)),t.tipo&&(e=e.set("tipo",t.tipo)),this.http.get(this.apiUrl,{params:e})}getLocalById(t){return this.http.get(`${this.apiUrl}/${t}`)}getMercadoByLocal(t){return this.http.get(`${this.apiUrl}/${t}/mercado`)}createLocal(t){return this.http.post(this.apiUrl,t).pipe(o(e=>{if(e.data){let a=this.localesSubject.value;this.localesSubject.next([...a,e.data])}}))}updateLocal(t,e){return this.http.patch(`${this.apiUrl}/${t}`,e).pipe(o(a=>{if(a.data){let r=this.localesSubject.value,i=r.findIndex(p=>p.id===t);i!==-1&&(r[i]=a.data,this.localesSubject.next([...r]))}}))}deleteLocal(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(o(()=>{let e=this.localesSubject.value;this.localesSubject.next(e.filter(a=>a.id!==t))}))}changeLocalStatus(t,e){return this.http.patch(`${this.apiUrl}/${t}/status`,{estado:e}).pipe(o(a=>{if(a.data){let r=this.localesSubject.value,i=r.findIndex(p=>p.id===t);i!==-1&&(r[i]=a.data,this.localesSubject.next([...r]))}}))}getLocalesByMercado(t){let e=new c().set("mercadoId",t);return this.http.get(`${this.apiUrl}/by-mercado`,{params:e})}activateLocal(t){return this.http.patch(`${this.apiUrl}/${t}/activate`,{})}deactivateLocal(t){return this.http.patch(`${this.apiUrl}/${t}/deactivate`,{})}suspendLocal(t){return this.http.patch(`${this.apiUrl}/${t}/suspend`,{})}getLocalStats(t){return this.http.get(`${this.apiUrl}/${t}/stats`)}checkLocalNumberAvailability(t,e,a){let r=new c().set("numeroLocal",t).set("mercadoId",e);return a&&(r=r.set("excludeId",a)),this.http.get(`${this.apiUrl}/check-number`,{params:r})}getLocalFacturas(t,e=1,a=10){let r=new c().set("page",e.toString()).set("limit",a.toString()).set("localId",t);return this.http.get(`${l.apiUrl}/facturas`,{params:r})}exportLocales(t={}){let e=new c;return t.search&&(e=e.set("search",t.search)),t.estado&&(e=e.set("estado",t.estado)),t.mercadoId&&(e=e.set("mercadoId",t.mercadoId)),t.tipo&&(e=e.set("tipo",t.tipo)),this.http.get(`${this.apiUrl}/export`,{params:e,responseType:"blob"})}formatMontoMensual(t){if(!t)return"L. 0.00";let e=parseFloat(t);return new Intl.NumberFormat("es-HN",{style:"currency",currency:"HNL",minimumFractionDigits:2}).format(e)}getEstadoColor(t){switch(t==null?void 0:t.toUpperCase()){case"ACTIVO":return"success";case"INACTIVO":return"danger";default:return"medium"}}getTipoLocalIcon(t){switch(t==null?void 0:t.toUpperCase()){case"FRUTAS":case"VERDURAS":return"leaf-outline";case"ABARROTERIA":case"ABBARROTERIA":return"storefront-outline";case"COCINA":case"COMEDOR":return"restaurant-outline";case"DULCERIA":return"ice-cream-outline";case"REFRESQUERIA":return"cafe-outline";case"MISCELANEOS":return"basket-outline";case"L\xC1CTEOS":case"LACTEOS":return"nutrition-outline";default:return"business-outline"}}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();export{f as a};
