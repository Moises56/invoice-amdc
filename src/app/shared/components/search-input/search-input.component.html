<div class="search-container">
  <!-- Selector de tipo de búsqueda -->
  <ion-segment 
    [value]="searchType()" 
    (ionChange)="onSearchTypeChange($event.detail.value)"
    class="search-type-selector">
    <ion-segment-button value="claveCatastral">
      <ion-label>Clave Catastral</ion-label>
      <ion-icon name="home-outline"></ion-icon>
    </ion-segment-button>
    <ion-segment-button value="dni">
      <ion-label>DNI</ion-label>
      <ion-icon name="card-outline"></ion-icon>
    </ion-segment-button>
  </ion-segment>

  <!-- Campo de búsqueda -->
  <div class="search-input-container">
    <ion-item 
      lines="none" 
      [class.error]="!isValid()"
      class="search-item">
      <ion-label position="stacked">{{ getSearchTypeLabel() }}</ion-label>
      <ion-input
        [value]="searchValue()"
        (ionInput)="onInputChange($event.detail.value!)"
        [placeholder]="getPlaceholder()"
        [disabled]="disabled"
        [class.error-input]="!isValid()"
        type="text"
        autocomplete="off"
        spellcheck="false">
      </ion-input>
      
      <!-- Botón de limpiar -->
      <ion-button 
        *ngIf="searchValue()"
        fill="clear" 
        slot="end" 
        size="small"
        (click)="clearSearch()">
        <ion-icon name="close-circle" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>

    <!-- Mensaje de error -->
    <div *ngIf="!isValid() && errorMessage()" class="error-message">
      <ion-icon name="alert-circle" color="danger"></ion-icon>
      <span>{{ errorMessage() }}</span>
    </div>
  </div>

  <!-- Información de ayuda -->
  <div class="help-info">
    <ion-text color="medium">
      <small>
        <ion-icon name="information-circle-outline"></ion-icon>
        <span *ngIf="searchType() === 'claveCatastral'">
          Ingrese la clave catastral (números y guiones)
        </span>
        <span *ngIf="searchType() === 'dni'">
          Ingrese el DNI (13 dígitos sin espacios)
        </span>
      </small>
    </ion-text>
  </div>
</div>